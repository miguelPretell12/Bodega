function tableAll(){$("#table_id").DataTable({destroy:!0,ajax:{method:"GET",url:"/dashboard/categorias/getCategorias"},columns:[{data:"nombre"},{data:null,render:function(a,e,t){return`\n            <button class="btn btn-warning far fa-edit" data-idcategoria="${a.id}" id="edit" data-bs-toggle="modal" data-bs-target="#modalCategoria" ></button>\n            <button class="btn btn-danger far fa-trash-alt" data-idcategoria="${a.id}" id="delete"></button>\n          `}}]})}function formulario(){$(document).on("submit","#formulario",(function(a){a.preventDefault();const e=$("#id").val(),t=$("#nombre").val(),o=new FormData;o.append("nombre",t.toLowerCase()),""==t?Swal.fire({position:"top-end",icon:"error",title:"Completar los campos requeridos",showConfirmButton:!1,timer:1500}):""==e?create(o):(o.append("id",e),update(o))}))}function obtenerData(){$(document).on("click","#edit",(function(a){const e=a.target.dataset.idcategoria,t=new FormData;t.append("id",e),getCategoria(t)}))}function eliminar(){$(document).on("click","#delete",(function(a){const e=a.target.dataset.idcategoria,t=new FormData;t.append("id",e),Swal.fire({title:"Â¿ Usted quiere eliminar este usuario ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, deseo eliminar el usuario"}).then(a=>{a.isConfirmed&&(remove(t),tableAll())})}))}function clean(){$("#id").val(""),$("#nombre").val("")}async function create(a){const e=await fetch(" /dashboard/categorias/create",{method:"POST",body:a}),t=await e.json(),{res:o,mensaje:r}=t;o?Swal.fire("Error!",r,"error"):(Swal.fire("Exito!",r,"success"),$("#modalCategoria").modal("hide"),tableAll())}async function update(a){const e=await fetch(" /dashboard/categorias/update",{method:"POST",body:a}),t=await e.json(),{res:o}=t;o?(Swal.fire("Exito!","Se edito correctamente la categoria","success"),$("#modalCategoria").modal("hide"),tableAll()):Swal.fire("Error!","Hubo un error al editar la categoria","error")}async function remove(a){const e=await fetch(" /dashboard/categorias/delete",{method:"POST",body:a}),t=await e.json(),{res:o}=t;o?Swal.fire("Eliminado!","La categoria ha sido eliminado correctamente","success"):Swal.fire("Error!","No se pudo eliminar la categoria","error")}async function getCategoria(a){const e=await fetch(" /dashboard/categorias/getCategoria",{method:"POST",body:a}),t=await e.json(),{id:o,nombre:r}=t.data;$("#id").val(o),$("#nombre").val(r)}$(document).ready((function(a){tableAll(),formulario(),obtenerData(),eliminar()})),$(document).on("click","#btn-register",(function(){clean()}));