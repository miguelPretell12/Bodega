function tableAll(){$("#table_id").DataTable({destroy:!0,ajax:{method:"GET",url:"/dashboard/categorias/getCategorias"},columns:[{data:"nombre"},{data:null,render:function(a,t,e){return`\n            <button class="btn btn-warning far fa-edit" data-idcategoria="${a.id}" id="edit" data-bs-toggle="modal" data-bs-target="#modalCategoria" ></button>\n            <button class="btn btn-danger far fa-trash-alt" data-idcategoria="${a.id}" id="delete"></button>\n          `}}]})}function formulario(){$(document).on("submit","#formulario",(function(a){a.preventDefault();const t=$("#id").val(),e=$("#nombre").val(),o=new FormData;o.append("nombre",e.toLowerCase()),""==e?Swal.fire({position:"top-end",icon:"error",title:"Completar los campos requeridos",showConfirmButton:!1,timer:1500}):""==t?create(o):(o.append("id",t),update(o))}))}function obtenerData(){$(document).on("click","#edit",(function(a){const t=a.target.dataset.idcategoria,e=new FormData;e.append("id",t),getCategoria(e)}))}function eliminar(){$(document).on("click","#delete",(function(a){const t=a.target.dataset.idcategoria,e=new FormData;e.append("id",t),Swal.fire({title:"Â¿ Usted quiere eliminar este usuario ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, deseo eliminar el usuario"}).then(a=>{a.isConfirmed&&(remove(e),tableAll())})}))}function clean(){$("#id").val(""),$("#nombre").val("")}async function create(a){const t=await fetch("http://localhost:4000/dashboard/categorias/create",{method:"POST",body:a}),e=await t.json(),{res:o,mensaje:r}=e;o?Swal.fire("Error!",r,"error"):(Swal.fire("Exito!",r,"success"),$("#modalCategoria").modal("hide"),tableAll())}async function update(a){const t=await fetch("http://localhost:4000/dashboard/categorias/update",{method:"POST",body:a}),e=await t.json(),{res:o}=e;o?(Swal.fire("Exito!","Se edito correctamente la categoria","success"),$("#modalCategoria").modal("hide"),tableAll()):Swal.fire("Error!","Hubo un error al editar la categoria","error")}async function remove(a){const t=await fetch("http://localhost:4000/dashboard/categorias/delete",{method:"POST",body:a}),e=await t.json(),{res:o}=e;o?Swal.fire("Eliminado!","La categoria ha sido eliminado correctamente","success"):Swal.fire("Error!","No se pudo eliminar la categoria","error")}async function getCategoria(a){const t=await fetch("http://localhost:4000/dashboard/categorias/getCategoria",{method:"POST",body:a}),e=await t.json(),{id:o,nombre:r}=e.data;$("#id").val(o),$("#nombre").val(r)}$(document).ready((function(a){tableAll(),formulario(),obtenerData(),eliminar()})),$(document).on("click","#btn-register",(function(){clean()}));