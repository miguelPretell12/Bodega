async function create(t){const a=await fetch("http://localhost:4000/dashboard/cargos/create",{method:"POST",body:t}),o=await a.json(),{res:e,bool:n}=o;n?(Swal.fire({icon:"success",title:"Exito",text:e}),$("#modalUsuario").modal("hide")):Swal.fire({icon:"error",title:"Error",text:e})}function formulario(){$("#formulario").on("submit",(function(t){t.preventDefault();const a=document.querySelector("#nombre").value,o=document.querySelector("#id").value,e=new FormData;e.append("nombre",a.toLowerCase()),""==o?create(e):(e.append("id",o),update(e)),tableAll(),clean()}))}function tableAll(){$("#table_id").DataTable({destroy:!0,ajax:{method:"GET",url:"/dashboard/cargos/lists"},columns:[{data:"nombre"},{data:null,render:function(t,a,o){return`\n            <button class="btn btn-warning far fa-edit" data-idcargo="${t.id}" id="edit" data-bs-toggle="modal" data-bs-target="#modalCargo" ></button>\n          <button class="btn btn-danger far fa-trash-alt" data-idcargo="${t.id}" id="delete"></button>\n          `}}]})}function obtenerData(){$(document).on("click","#edit",(function(t){const a=t.target.dataset.idcargo,o=new FormData;o.append("id",a),getCargo(o)}))}function deleteCargo(){$(document).on("click","#delete",(function(t){const a=t.target.dataset.idcargo,o=new FormData;o.append("id",a),Swal.fire({title:"Â¿ Usted quiere eliminar este cargo ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, deseo eliminar el cargo"}).then(t=>{t.isConfirmed&&(remove(o),tableAll())})}))}function clean(){$("#id").val(""),$("#nombre").val("")}async function getCargo(t){const a=await fetch("http://localhost:4000/dashboard/cargos/getCargo",{method:"POST",body:t}),o=await a.json(),{id:e,nombre:n}=o.data;$("#id").val(e),$("#nombre").val(n)}async function update(t){const a=await fetch("http://localhost:4000/dashboard/cargos/update",{method:"POST",body:t});(await a.json()).res&&$("#modalUsuario").modal("hide")}async function remove(t){const a=await fetch("http://localhost:4000/dashboard/cargos/delete",{method:"POST",body:t}),o=await a.json(),{res:e}=o;e?Swal.fire("Eliminado!","El cargo ha sido eliminado correctamente","success"):Swal.fire("Error!","El cargo no ha sido eliminado correctamente o este cargo ha sido registrado en otro registro","error")}$(document).ready((function(){formulario(),tableAll(),obtenerData(),deleteCargo()})),$(document).on("click","#btn",(function(){clean()}));